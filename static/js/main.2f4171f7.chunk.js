(this["webpackJsonpxstate-react-typescript-template"]=this["webpackJsonpxstate-react-typescript-template"]||[]).push([[0],{11:function(e,t,n){"use strict";function o(e){this.$root=e,this.VOID=[a([])],this.NULL=[],this.GARBAGE=[],this.$check=function(){for(var e in this)if("$root"!==e&&"$check"!==e)try{d(this[e])}catch(t){p("When checking grammar rule '"+e+"'",t)}}}function i(e){return new m(e)}function r(e){return new c(e)}function a(e){return new u(e)}function s(e,t,n){return new l(e,t,n)}function m(e){this.content=e,this._string="$"+e,this.toString=function(){return this._string}}function c(e){this.content=e,this._string="{"+e+"}",this.toString=function(){return this._string}}function u(e){this.content=e,this._string="("+e.join("|")+")",this.toString=function(){return this._string}}function l(e,t,n){this.min=e,this.max=t,this.content=n,this._string=this.content+"<"+this.min+"-"+(this.max==1/0?"":this.max)+">",this.toString=function(){return this._string}}function p(e,t){throw void 0==t?TypeError(e):TypeError(e+"; "+t.message)}function d(e){try{for(var t in e.constructor!==Array&&p("Expected Array, found "+e.constructor.name),e)e[t].constructor==Array?d(e[t]):e[t].constructor!=String&&e[t].checkExpansion()}catch(n){p("When checking sequence expansion",n)}}n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"h",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return m})),n.d(t,"i",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"g",(function(){return l})),m.prototype.checkExpansion=function(){this.content.constructor!==String&&p("When checking Ref content; Expected String, found "+this.content.constructor.name)},c.prototype.checkExpansion=function(){this.content.constructor!==String&&p("When checking Tag content; Expected String, found "+this.content.constructor.name)},u.prototype.checkExpansion=function(){try{for(var e in this.content.constructor!==Array&&p("Expected Array, found "+this.content.constructor.name),this.content)d(this.content[e])}catch(t){p("When checking OneOf content",t)}},l.prototype.checkExpansion=function(){try{this.min.constructor===Number&&this.max.constructor===Number||p("Expected min/max to be Number, found "+this.min.constructor.name+"/"+this.max.constructor.name),0<=this.min&&this.min<=this.max||p("Expected 0 <= min <= max, found "+this.min+"/"+this.max),d(this.content)}catch(e){p("When checking Repeat content",e)}}},13:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return parse}));var _srgs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11);function LOG(e){}function clone(e){if(null==e||"object"!=typeof e)return e;var t=new e.constructor;for(var n in e)t[n]=clone(e[n]);return t}function isEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Chart(e){this.numberOfWords=e,this.passives=new Array(e),this.actives=new Array(e);for(var t=0;t<=e;t++)this.passives[t]={},this.actives[t]={};this.add=function(e){var t,n;return e.isPassive?(t=this.passives[e.start],n=e.lhs):(t=this.actives[e.end],n=e.next.content),n in t||(t[n]={}),!(e in t[n])&&(t[n][e]=e,!0)},this.resultsForRule=function(t,n,o){n=n||0,o=o||e;var i=[],r=this.passives[n][t];for(var a in r)r[a].end==o&&i.push(r[a].out);return i},this.allEdges=function(){return this.allPassiveEdges().concat(this.allActiveEdges())},this.allPassiveEdges=function(){var e=[];for(var t in this.passives)for(var n in this.passives[t])for(var o in this.passives[t][n])e.push(this.passives[t][n][o]);return e},this.allActiveEdges=function(){var e=[];for(var t in this.actives)for(var n in this.actives[t])for(var o in this.actives[t][n])e.push(this.actives[t][n][o]);return e},this.statistics=function(){var e=this.allPassiveEdges().length,t=this.allActiveEdges().length;return{nrEdges:e+t,nrPassiveEdges:e,nrActiveEdges:t}}}function PassiveEdge(e,t,n,o){this.start=e,this.end=t,this.lhs=n,this.out=o,this.isPassive=!0;var i="["+e+"-"+t+"] $"+n+" := "+o;this._string=i,this.toString=function(){return this._string}}function ActiveEdge(e,t,n,o,i,r,a,s){this.start=e,this.end=t,this.lhs=n,this.next=o,this.rest=i,this.out=r,this.rules=a,this.text=s,this.isPassive=!1;var m="<"+e+"-"+t+"> $"+n+" -> "+o+", "+i+" := "+r+" <- "+a;this._string=m,this.toString=function(){return this._string}}function parse(words,grammar,root,filter){root||(root=grammar.$root);var chart=new Chart(words.length),agenda=[],leftCornerFilter;function addToChart(inference,start,end,lhs,rhs,out,rules,text){var edge;if(rhs.length>0){var next=rhs[0],rest=rhs.slice(1);switch(next.constructor){case Array:return void addToChart(inference+",SEQUENCE",start,end,lhs,next.concat(rest),out,rules,text);case _srgs__WEBPACK_IMPORTED_MODULE_0__.g:var min=next.min,max=next.max;if(min<=0&&addToChart(inference+",SKIP",start,end,lhs,rest,out,rules,text),max>0){var content=next.content,rhs=1==max?[content]:[content,_srgs__WEBPACK_IMPORTED_MODULE_0__.f(min?min-1:min,max-1,content)];addToChart(inference+",REPEAT",start,end,lhs,rhs.concat(rest),out,rules,text)}return;case _srgs__WEBPACK_IMPORTED_MODULE_0__.c:var oneof=next.content;for(var i in oneof){var rhs=oneof[i].concat(rest);addToChart(inference+",ONEOF",start,end,lhs,rhs,out,rules,text)}return;case _srgs__WEBPACK_IMPORTED_MODULE_0__.i:return out=clone(out),rules=clone(rules),eval(next.content),void addToChart(inference+",TAG",start,end,lhs,rest,out,rules,text)}edge=new ActiveEdge(start,end,lhs,next,rest,out,rules,text)}else edge=new PassiveEdge(start,end,lhs,out);chart.add(edge)&&(LOG("+ "+inference+": "+edge),agenda.push(edge))}for(leftCornerFilter=void 0==filter?function(){return!0}:function(e,t){var n=filter[e];return!n||words[t]in n},addToChart("INIT",0,0,root,grammar[root],{},{},{});agenda.length>0;){var edge=agenda.pop(),start=edge.start,end=edge.end,lhs=edge.lhs,next=edge.next;if(LOG(edge),edge.isPassive){var actives=chart.actives[start][lhs];for(var i in actives){var active=actives[i],rules=clone(active.rules),text=active.text;text[edge.lhs]=words.slice(start,end).join(" "),"object"==typeof edge.out&&isEmpty(edge.out)?rules[edge.lhs]=text[edge.lhs]:rules[edge.lhs]=clone(edge.out),addToChart("COMBINE",active.start,end,active.lhs,active.rest,active.out,rules,text)}}else if(next.constructor==_srgs__WEBPACK_IMPORTED_MODULE_0__.e){var ref=next.content,passives=chart.passives[end][ref];for(var i in passives){var passive=passives[i],rules=clone(edge.rules),text=edge.text;rules[passive.lhs]=clone(passive.out),text[passive.lhs]=passive.text,addToChart("COMBINE",start,passive.end,lhs,edge.rest,edge.out,rules,text)}ref in grammar&&leftCornerFilter(ref,end)&&addToChart("PREDICT",end,end,ref,grammar[ref],{},{},{})}else next==words[end]&&addToChart("SCAN",start,end+1,lhs,edge.rest,edge.out,edge.rules,edge.text)}return chart}},31:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var o=n(28),i=n(5),r=(n(31),n(8),n(25)),a=n(22),s=n(2),m=n(46),c=n(45),u=n(11);function l(e){for(var t=function(e){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(e,"application/xml");if("undefined"!=typeof ActiveXObject){var t=XML.newDocument();return t.loadXML(e),t}var n="data:text/xml;charset=utf-8,"+encodeURIComponent(e),o=new XMLHttpRequest;return o.open("GET",n,!1),o.send(null),o.responseXML}(e),n=t.getElementsByTagName("grammar")[0].getAttribute("root"),o=new u.a(n),i=t.getElementsByTagName("rule"),r=0;r<i.length;r++){var a=i[r];o[a.getAttribute("id")]=p(a)}return o}function p(e){for(var t=e.childNodes,n=[],o=0;o<t.length;o++)if(3==t[o].nodeType){var i=t[o].textContent.trim();""!=i&&n.push(i.split(/ +/))}else if(1==t[o].nodeType)if("token"==t[o].nodeName)n.push(u.h(t[o].textContent));else if("ruleref"==t[o].nodeName){var r=t[o].getAttribute("uri");n.push(u.d(r.slice(1)))}else if("tag"==t[o].nodeName)n.push(u.h(t[o].textContent.trim()));else if("one-of"==t[o].nodeName)n.push(u.b(p(t[o])));else if("item"==t[o].nodeName){var a=t[o].getAttribute("repeat");if(a){var s=a.split("-"),m=parseInt(s[0]),c=parseInt(s[1]);c=c||1/0,n.push(u.f(m,c,p(t[o])))}else n.push(p(t[o]))}else console.log(t[o]);return n}var d=n(13);const g=l('\n<grammar root="mycommand">\n  <rule id="mycommand">\n\n    \x3c!--Polite expressions before--\x3e\n    <item repeat="0-1">can you</item><item repeat="0-1">could you</item><item repeat="0-">please</item> \n    \n    <one-of> \n        \x3c!--Make object with 2 properties from either of " ___ the XXX" commands --\x3e\n\n        <item> \n           <ruleref uri="#commandA"/> \n           <tag>\n             out.command=new Object();\n             out.command.action= rules.commandA.action; \n             out.command.object=rules.commandA.object;\n           </tag>\n        </item> \n\n        <item> \n           <ruleref uri="#commandB"/>         \n           <tag>\n             out.command=new Object();\n             out.command.action= rules.commandB.action; \n             out.command.object=rules.commandB.object;\n           </tag>\n        </item> \n    </one-of>\n\n    \x3c!--Polite expressions after--\x3e\n    <item repeat="0-">please</item><item repeat="0-">thanks</item> <item repeat="0-">thank you</item>\n  </rule> \n\n\n   \x3c!--Electricals--\x3e\n   <rule id="commandA"> \n      <ruleref uri="#actionA"/> the <ruleref uri="#objectA"/>\n      <tag>\n           out.action= rules.actionA; \n           out.object=rules.objectA;\n      </tag>\n   </rule>\n   \n   \x3c!-- House openings --\x3e\n   <rule id="commandB">  \n      <ruleref uri="#actionB"/> the <ruleref uri="#objectB"/>\n      <tag>\n           out.action= rules.actionB; \n           out.object=rules.objectB;\n      </tag>\n   </rule>\n\n<rule id="actionA"> \n    <one-of>  \n        <item> turn on <tag> out=\'on\'; </tag></item>     <item> switch on <tag> out=\'on\'; </tag></item>\n        <item> turn off <tag> out=\'off\'; </tag></item>   <item> switch off <tag> out=\'off\'; </tag></item>\n    </one-of>\n</rule>\n<rule id="objectA"> \n    <one-of> \n        <item> light </item> <item> lights <tag> out = \'light\'; </tag></item> \n        <item> heat </item> \n        <item> AC <tag> out = \'air conditioning\'; </tag></item>   <item> air conditioning </item>  \n    </one-of> \n</rule>\n\n<rule id="actionB"> \n    <one-of>  \n        <item> open </item> \n        <item> close </item> \n    </one-of> \n</rule>\n<rule id="objectB"> \n    <one-of> \n        <item> window </item> \n        <item> door </item> \n    </one-of> \n</rule>\n   \n</grammar>\n');let h=function(e){let t,n=Object(d.a)(e.split(/\s+/),g).resultsForRule(g.$root)[0];if(void 0===n)t="NotCommand";else{let e,o=n.command.action,i=n.command.object;"on"===o&&(e="turning on"),"off"===o&&(e="turning off"),"open"===o&&(e="opening"),"close"===o&&(e="closing"),t="Sure, ".concat(e," the ").concat(i,".")}return t};const y=Object(s.q)((e=>({type:"SPEAK",value:h(e.recResult)})));function f(e){return console.log(">>Saying: ".concat(e)),Object(s.q)((t=>({type:"SPEAK",value:e})))}const E={id:"SmartHome",initial:"welcomePrompt",states:{init:{on:{CLICK:"welcomePrompt"}},welcomePrompt:Object(i.a)({on:{RECOGNISED:[{target:"stop",cond:e=>"stop"===e.recResult},{target:"NotACommand",cond:e=>"NotCommand"===h(e.recResult)},{target:"chore",cond:e=>"NotCommand"!=h(e.recResult)}],CLICK:"stop"}},(b="Please say your smart home command",{initial:"prompt",states:{prompt:{entry:f(b),on:{ENDSPEECH:"ask"}},ask:{entry:Object(s.q)("LISTEN")}}})),stop:{entry:f("Ok, stopped"),always:"init"},NotACommand:{entry:f("Sorry, I dont know how to do that."),on:{ENDSPEECH:"welcomePrompt"}},chore:{initial:"prompt",states:{prompt:{entry:y,on:{ENDSPEECH:"#root.dm.init"}}}}}};var b;const w=Object(s.q)((e=>({type:"SPEAK",value:"".concat(e.snippet)})));const O={id:"Search",initial:"welcome",states:{init:{on:{CLICK:"welcome"}},welcome:Object(i.a)({on:{RECOGNISED:{target:"query",actions:Object(s.b)((e=>({query:e.recResult})))}}},function(e){return{initial:"prompt",states:{prompt:{entry:(t=e,Object(s.q)((e=>({type:"SPEAK",value:t})))),on:{ENDSPEECH:"ask"}},ask:{entry:Object(s.q)("LISTEN")}}};var t}("What are you looking for?")),query:{invoke:{id:"duck",src:(e,t)=>{return n=e.query,fetch(new Request("https://cors-anywhere.herokuapp.com/"+"https://api.duckduckgo.com/?q=".concat(n,"&format=json&skip_disambig=1"),{headers:{Origin:"http://localhost:3000"}})).then((e=>e.json()));var n},onDone:{target:"answer",actions:[Object(s.b)(((e,t)=>({snippet:t.data.AbstractText}))),(e,t)=>console.log(t.data)]},onError:{target:"welcome",actions:(e,t)=>console.log(t.data)}}},answer:{entry:w,on:{ENDSPEECH:"init"}}}};(0,n(10).a.cancel)("timeout");function k(e){return Object(s.q)((t=>({type:"SPEAK",value:e})))}function v(){return[{target:"#help",cond:e=>x(e.recResult)},{target:"#stop",cond:e=>"stop"===e.recResult},{target:".nomatch"}]}function j({promptMsg:e,question:t,prompt2:n}){return{initial:"prompt",states:{prompt:{entry:e,on:{ENDSPEECH:{cond:()=>!0===_(),target:"question"}}},question:{entry:k(t),on:{ENDSPEECH:"ask"}},ask:{entry:[Object(s.q)("LISTEN"),Object(s.q)("TIMEOUT",{delay:7500,id:"timeout"})]},promptAgain:{entry:[Object(s.q)("RECOGNISED"),k(n)],always:[{cond:()=>(S+=1,S<3),target:"question"},{target:"#goodbye"}]},nomatch:{entry:[k("Sorry, I didnt get that")],on:{ENDSPEECH:"question"}}}}}let S=0;function _(){return S=0,!0}let x=function(e){return["help","I need help","help me"].includes(e)};const R={John:{person:"John Appleseed"},Goofy:{person:"Goofy Dog"},Mickey:{person:"Mickey Mouse"},Minnie:{person:"Minnie Mouse"},Donald:{person:"Donald Duck"},Daisy:{person:"Daisy Duck"},Lisa:{person:"Lisa Simpson"},Homer:{person:"Homer Simpson"},Monty:{person:"Montgomery Burns"},Apu:{person:"Apu Nahasapeemapetilon"},"on Monday":{weekday:"Monday"},"on Tuesday":{weekday:"Tuesday"},"on Wednesday":{weekday:"Wednesday"},"on Thursday":{weekday:"Thursday"},"on Friday":{weekday:"Friday"},"on Saturday":{weekday:"Saturday"},"on Sunday":{weekday:"Sunday"},Monday:{weekday:"Monday"},Tuesday:{weekday:"Tuesday"},Wednesday:{weekday:"Wednesday"},Thursday:{weekday:"Thursday"},Friday:{weekday:"Friday"},Saturday:{weekday:"Saturday"},Sunday:{weekday:"Sunday"},1:{time:"13:00"},2:{time:"14:00"},3:{time:"15:00"},4:{time:"16:00"},5:{time:"17:00"},6:{time:"18:00"},7:{time:"19:00"},8:{time:"20:00"},9:{time:"21:00"},10:{time:"22:00"},11:{time:"15:00"},12:{time:"00:00"},"at 1":{time:"13:00"},"at 2":{time:"14:00"},"at 3":{time:"15:00"},"at 4":{time:"16:00"},"at 5":{time:"17:00"},"at 6":{time:"18:00"},"at 7":{time:"19:00"},"at 8":{time:"20:00"},"at 9":{time:"21:00"},"at 10":{time:"22:00"},"at 11":{time:"23:00"},"at 12":{time:"00:00"}},P={yes:{yes_no:!0},"of course":{yes_no:!0},sure:{yes_no:!0},absolutely:{yes_no:!0},yeah:{yes_no:!0},yep:{yes_no:!0},okay:{yes_no:!0},no:{yes_no:!1},nope:{yes_no:!1},"no thanks":{yes_no:!1},nah:{yes_no:!1}},C={id:"Plus",initial:"welcome",states:{help:{id:"help",entry:k("I am here if you need help."),on:{ENDSPEECH:"#appointment.history"}},stop:{id:"stop",entry:k("Ok, stopped."),on:{ENDSPEECH:"#root.dm.init"}},goodbye:{id:"goodbye",entry:k("You were silent for too many times. Bye for now."),always:{cond:()=>!0===_(),target:"#root.dm.init"}},init:{id:"PlusInit",on:{CLICK:"welcome"}},welcome:{entry:k("Hello, lets create a meeting."),on:{ENDSPEECH:"appointment"}},appointment:{id:"appointment",initial:"who",states:{history:{type:"history",history:"shallow"},who:Object(i.a)({on:{RECOGNISED:[{cond:e=>"person"in(R[e.recResult]||{}),actions:Object(s.b)((e=>({person:R[e.recResult].person}))),target:"day"},...v()],TIMEOUT:".promptAgain"}},j({promptMsg:Object(s.q)((e=>({type:"SPEAK",value:""}))),question:"Who are you meeting with?",prompt2:"You can say Mickey or Minnie for example"})),day:Object(i.a)({on:{RECOGNISED:[{cond:e=>"weekday"in(R[e.recResult]||{}),actions:Object(s.b)((e=>({weekday:R[e.recResult].weekday}))),target:"how_long"},...v()],TIMEOUT:".promptAgain"}},j({promptMsg:Object(s.q)((e=>({type:"SPEAK",value:"OK. ".concat(e.person,".")}))),question:"On which day is your meeting?",prompt2:"Say a day of the week"})),how_long:Object(i.a)({on:{RECOGNISED:[{cond:e=>"yes_no"in(P[e.recResult]||{})&&!0===P[e.recResult].yes_no,target:"confirm_whole_day"},{cond:e=>"yes_no"in(P[e.recResult]||{})&&!1===P[e.recResult].yes_no,target:"what_time"},...v()],TIMEOUT:".promptAgain"}},j({promptMsg:Object(s.q)((e=>({type:"SPEAK",value:"OK. on ".concat(e.weekday,".")}))),question:"Will it take the whole day?",prompt2:"Say yes or no"})),confirm_whole_day:Object(i.a)({on:{RECOGNISED:[{cond:e=>"yes_no"in(P[e.recResult]||{})&&!0===P[e.recResult].yes_no,target:"done"},{cond:e=>"yes_no"in(P[e.recResult]||{})&&!1===P[e.recResult].yes_no,target:"who"},...v()],TIMEOUT:".promptAgain"}},j({promptMsg:Object(s.q)((e=>({type:"SPEAK",value:"Alright. Meeting ".concat(e.person," on ").concat(e.weekday," for the whole day.")}))),question:"Shall I create a whole-day appointment?",prompt2:"Say yes or no"})),what_time:Object(i.a)({on:{RECOGNISED:[{cond:e=>"time"in(R[e.recResult]||{}),actions:Object(s.b)((e=>({time:R[e.recResult].time}))),target:"confirm_with_time"},...v()],TIMEOUT:".promptAgain"}},j({promptMsg:Object(s.q)((e=>({type:"SPEAK",value:"At what time is your meeting?"}))),question:"Say an hour of the day.",prompt2:"You may say at 1, at 2, and so on"})),confirm_with_time:Object(i.a)({on:{RECOGNISED:[{cond:e=>"yes_no"in(P[e.recResult]||{})&&!0===P[e.recResult].yes_no,target:"done"},{cond:e=>"yes_no"in(P[e.recResult]||{})&&!1===P[e.recResult].yes_no,target:"who"},...v()],TIMEOUT:".promptAgain"}},j({promptMsg:Object(s.q)((e=>({type:"SPEAK",value:"Alright. Meeting ".concat(e.person," on ").concat(e.weekday," at ").concat(e.time,".")}))),question:"Shall I create the appointment?",prompt2:"Say yes or no"})),done:{entry:k("Great, your appointment has been made."),on:{ENDSPEECH:"#root.dm.init"}}}}}},A=l('\n<grammar root="mymeeting">\n  <rule id="mymeeting">\n    \n    <item repeat="0-"><ruleref uri="#Politeness"/></item>\n\t\n    <item repeat="0-1"><ruleref uri="#MakeMeeting"/></item>\n\n    \x3c!--Six different orders--\x3e\n    <one-of>  \n        <item> <item repeat="0-1"><ruleref uri="#person"/></item><item repeat="0-1"><ruleref uri="#day"/></item><item repeat="0-1"><ruleref uri="#time"/></item> </item>\n        <item> <item repeat="0-1"><ruleref uri="#person"/></item><item repeat="0-1"><ruleref uri="#time"/></item><item repeat="0-1"><ruleref uri="#day"/></item> </item> \n        <item> <item repeat="0-1"><ruleref uri="#day"/></item><item repeat="0-1"><ruleref uri="#person"/></item><item repeat="0-1"><ruleref uri="#time"/></item> </item>\n        <item> <item repeat="0-1"><ruleref uri="#day"/></item><item repeat="0-1"><ruleref uri="#time"/></item><item repeat="0-1"><ruleref uri="#person"/></item> </item>\n        <item> <item repeat="0-1"><ruleref uri="#time"/></item><item repeat="0-1"><ruleref uri="#day"/></item><item repeat="0-1"><ruleref uri="#person"/></item> </item>\n        <item> <item repeat="0-1"><ruleref uri="#time"/></item><item repeat="0-1"><ruleref uri="#person"/></item><item repeat="0-1"><ruleref uri="#day"/></item> </item>   \n    </one-of>\n    \n    <item repeat="0-"><ruleref uri="#Politeness"/></item>\n    <item repeat="0-">.</item><item repeat="0-">!</item><item repeat="0-">?</item>\n    \n    <tag>\n     out.meeting=new Object();\n     out.meeting.person= rules.person; \n     out.meeting.day= rules.day; \n     out.meeting.time= rules.time; \n    </tag>\n    \n  </rule> \n\n   //Polite Expressions//\n   <rule id="Politeness">\n        <one-of>  \n            <item> please </item> <item> thanks </item> <item> thank you </item> \n\t\t\t<item> could you </item> <item> would you </item> <item> can you </item> \n\t\t\t<item> will you </item> <item> i would like to </item>  <item> i want to </item> \n        </one-of>\n   </rule>\n\n  \n   //Make Meeting Command//\n   <rule id="MakeMeeting">\n        <one-of>  \n            <item> create a meeting </item> <item> create an appointment </item> \n\t\t\t<item> make a meeting </item> <item> make an appointment </item>\n            <item> we have a meeting </item> <item> have a meeting </item>\n            <item> i am meeting </item> <item> i\'m meeting </item> <item> meet </item> <item> i have a meeting </item>\n            <item> meeting </item> \n        </one-of>\n   </rule>\n\n   //People//\n   <rule id="person"> <item repeat="0-1">with</item>\n        <one-of>  \n            \n            <item> john <tag> out="John Appleseed" </tag></item>  \n            <item> goofy <tag> out="Goofy Dog" </tag></item> \n            <item> mickey <tag> out="Mickey Mouse" </tag></item> \n            <item> minnie <tag> out="Minnie Mouse" </tag></item> \n            <item> donald <tag> out="Donald Duck" </tag></item> \n            <item> daisy <tag> out="Daisy Duck" </tag></item> \n            <item> lisa <tag> out="Lisa Simpson" </tag></item> \n            <item> homer <tag> out="Homer Simpson" </tag></item> \n            <item> monty <tag> out="Montgomery Burns" </tag></item> \n            <item> apu <tag> out="Apu Nahasapeemapetilon" </tag></item> \n\n        </one-of>\n   </rule>\n   \n   //Days//\n    <rule id="day"> <item repeat="0-1">on</item>\n        <one-of> \n            <item> monday </item> <item> tuesday </item> <item> wednesday </item>\n            <item> thursday </item> <item> friday </item> <item> saturday </item>\n            <item> sunday </item>\n        </one-of> \n    </rule>\n\n   //Times//\n    <rule id="time"> \n        <one-of> \n            <item>\n                <item repeat="0-1">at</item>\n                <one-of> \n                    <item> noon <tag>out="12 p.m.";</tag></item> \n                    <item> midnight <tag>out="12 a.m.";</tag></item> \n                    <item>1</item> <item>2</item> <item>3</item> <item>4</item> <item>5</item>\n                    <item>6</item> <item>7</item> <item>8</item> <item>9</item> <item>10</item>\n                    <item>11</item> <item>12</item>\n                </one-of>\n\n                <item repeat="0-1">\n                  <one-of> \n                    <item> a.m. </item> <item> p.m. </item>\n                  </one-of>\n                </item>\n            </item>\n\n            <item> <tag> out=\'whole day\'; </tag>\n                <item repeat="0-1">for</item>\n                <item repeat="0-1">the</item>\n                <one-of>\n                <item> whole day </item> <item> all day </item> <item> entire day </item>\n                </one-of>\n            </item>\n\n        </one-of>\n\n    </rule>\n   \n</grammar>\n');function D(e){let t,n=Object(d.a)(e.toLowerCase().split(/\s+/),A).resultsForRule(A.$root)[0];return void 0!=n&&(t=n.meeting,t.time&&"at "===t.time.slice(0,3)&&(t.time=t.time.slice(3)),t.day&&"on "===t.day.slice(0,3)&&(t.day=t.day.slice(3))),t}function N(e){let t,n=[];return e.person||n.push("with whom"),e.weekday||n.push("on which day"),e.time||n.push("at what time"),0===n.length&&(t="I have all the details of your meeting!"),1===n.length&&(t="Tell me ".concat(n[0]," you are meeting")),2===n.length&&(t="Tell me ".concat(n[0],", and ").concat(n[1]," is your meeting")),3===n.length&&(t="Tell me ".concat(n[0],", ").concat(n[1],", and ").concat(n[2]," is the meeting")),t}function T(e){let t,n=e.person?"with "+e.person:"",o=e.weekday?"on "+e.weekday:"";return t=e.time?"whole day"===e.time?"for the whole day":"at "+e.time:"","".concat(n," ").concat(o," ").concat(t)}function I(e){return Object(s.q)((t=>({type:"SPEAK",value:e})))}function M(e){return{initial:"prompt",states:{prompt:{entry:e,on:{ENDSPEECH:"ask"}},ask:{entry:Object(s.q)("LISTEN")},nomatch:{entry:[I("Sorry, I didnt get that")],on:{ENDSPEECH:"prompt"}}}}}const q={id:"Pro",initial:"welcome",states:{init:{on:{CLICK:"start"}},stop:{entry:I("Ok, stopped"),always:"init"},start:{entry:I("Lets make an appointment. "),on:{ENDSPEECH:"welcome"}},restart:{entry:I("Ok, starting over"),on:{ENDSPEECH:"welcome"}},welcome:Object(i.a)({on:{RECOGNISED:[{cond:e=>!!D(e.recResult),actions:Object(s.b)((e=>({person:D(e.recResult).person,weekday:D(e.recResult).day,time:D(e.recResult).time}))),target:"transit"},{target:"stop",cond:e=>"stop"===e.recResult},{target:"restart",cond:e=>"restart"===e.recResult},{target:".nomatch"}]}},M(I("Tell me the meeting details."))),transit:{always:[{target:"final",cond:e=>!!e.person&&!!e.weekday&&!!e.time},{target:"askMore",cond:e=>!e.person||!e.weekday||!e.time}]},askMore:Object(i.a)({on:{RECOGNISED:[{cond:e=>!!D(e.recResult)&&!!e.weekday&&!!e.time,actions:Object(s.b)((e=>({person:D(e.recResult).person}))),target:"transit"},{cond:e=>!!D(e.recResult)&&!!e.person&&!!e.time,actions:Object(s.b)((e=>({weekday:D(e.recResult).day}))),target:"transit"},{cond:e=>!!D(e.recResult)&&!!e.person&&!!e.weekday,actions:Object(s.b)((e=>({time:D(e.recResult).time}))),target:"transit"},{cond:e=>!!D(e.recResult)&&!e.person&&!e.weekday,actions:Object(s.b)((e=>({person:D(e.recResult).person,weekday:D(e.recResult).day}))),target:"transit"},{cond:e=>!!D(e.recResult)&&!e.person&&!e.time,actions:Object(s.b)((e=>({person:D(e.recResult).person,time:D(e.recResult).time}))),target:"transit"},{cond:e=>!!D(e.recResult)&&!e.weekday&&!e.time,actions:Object(s.b)((e=>({weekday:D(e.recResult).day,time:D(e.recResult).time}))),target:"transit"},{target:"stop",cond:e=>"stop"===e.recResult},{target:"restart",cond:e=>"restart"===e.recResult},{target:".nomatch"}]}},M(Object(s.q)((e=>({type:"SPEAK",value:N(e)+T(e)+"?"}))))),final:Object(i.a)({on:{RECOGNISED:[{cond:e=>!0===function(e){if(["yes","of course","sure","absolutely","yeah","yep","okay"].includes(e))return!0}(e.recResult),target:"done"},{cond:e=>!0===function(e){if(["no","nope","no thanks","nah"].includes(e))return!0}(e.recResult),target:"restart"},{target:"stop",cond:e=>"stop"===e.recResult},{target:"restart",cond:e=>"restart"===e.recResult},{target:".nomatch"}]}},M(Object(s.q)((e=>({type:"SPEAK",value:"Meeting ".concat(T(e),". Was that correct?")}))))),done:{entry:I("Great, your appointment has been made."),on:{ENDSPEECH:"#root.dm.init"}}}},L=l('\n<grammar root="order">\n   <rule id="order">\n      I would like a\n      <ruleref uri="#drink"/>\n      <tag>out.drink = new Object(); out.drink.liquid=rules.drink.type;\n           out.drink.drinksize=rules.drink.drinksize;</tag>\n      and\n      <ruleref uri="#pizza"/>\n      <tag>out.pizza=rules.pizza;</tag>\n   </rule>\n   <rule id="kindofdrink">\n      <one-of>\n         <item>coke</item>\n         <item>pepsi</item>\n         <item>coca cola<tag>out="coke";</tag></item>\n      </one-of>\n   </rule>\n   <rule id="foodsize">\n      <tag>out="medium";</tag> \x3c!-- "medium" is default if nothing said --\x3e\n      <item repeat="0-1">\n         <one-of>\n            <item>small<tag>out="small";</tag></item>\n            <item>medium</item>\n            <item>large<tag>out="large";</tag></item>\n            <item>regular<tag>out="medium";</tag></item>\n         </one-of>\n      </item>\n   </rule>\n   \x3c!-- Construct Array of toppings, return Array --\x3e\n   <rule id="tops">\n      <tag>out=new Array;</tag>\n      <ruleref uri="#top"/>\n      <tag>out.push(rules.top);</tag>\n      <item repeat="1-">\n         and\n         <ruleref uri="#top"/>\n         <tag>out.push(rules.top);</tag>\n      </item>\n   </rule>\n   <rule id="top">\n      <one-of>\n         <item>anchovies</item>\n         <item>pepperoni</item>\n         <item>mushroom<tag>out="mushrooms";</tag></item>\n         <item>mushrooms</item>\n      </one-of>\n   </rule>\n   \x3c!-- Two properties (drinksize, type) on left hand side Rule Variable --\x3e\n   <rule id="drink">\n      <ruleref uri="#foodsize"/>\n      <ruleref uri="#kindofdrink"/>\n      <tag>out.drinksize=rules.foodsize; out.type=rules.kindofdrink;</tag>\n   </rule>\n   \x3c!-- Three properties on rules.pizza --\x3e\n   <rule id="pizza">\n      <ruleref uri="#number"/>\n      <ruleref uri="#foodsize"/>\n      <tag>out.pizzasize=rules.foodsize; out.number=rules.number;</tag>\n      pizzas with\n      <ruleref uri="#tops"/>\n      <tag>out.topping=rules.tops;</tag>\n   </rule>\n   <rule id="number">\n      <one-of>\n         <item>\n            <tag>out=1;</tag>\n            <one-of>\n               <item>a</item>\n               <item>one</item>\n            </one-of>\n         </item>\n         <item>two<tag>out=2;</tag></item>\n         <item>three<tag>out=3;</tag></item>\n      </one-of>\n   </rule>\n</grammar>\n'),K=Object(d.a)("I would like a coca cola and three large pizzas with pepperoni and mushrooms".split(/\s+/),L).resultsForRule(L.$root)[0];console.log(K);const H=Object(s.q)((e=>({type:"SPEAK",value:"Repainting to ".concat(e.recResult)})));function G(e){return Object(s.q)((t=>({type:"SPEAK",value:e})))}const z={initial:"welcome",states:{init:{on:{CLICK:"welcome"}},welcome:Object(i.a)({id:"ColourWelcome",on:{RECOGNISED:[{target:"stop",cond:e=>"stop"===e.recResult},{target:"repaint"}]}},function(e){return{initial:"prompt",states:{prompt:{entry:G(e),on:{ENDSPEECH:"ask"}},ask:{entry:Object(s.q)("LISTEN")}}}}("Tell me the colour")),stop:{entry:G("Ok"),always:"#root.dm.init"},repaint:{initial:"prompt",states:{prompt:{entry:H,on:{ENDSPEECH:"repaint"}},repaint:{entry:"changeColour",always:"#ColourWelcome"}}}}},B=l('\n<grammar root="mycommand">\n  <rule id="mycommand">\n\n    \x3c!--Polite expressions before--\x3e\n    <item repeat="0-"><ruleref uri="#Politeness"/></item> \n    \n    <one-of> \n        \x3c!--Make object with .intent property --\x3e\n\n        <item>   \n          <ruleref uri="#smarthome"/>\n          <tag> out= new Object();out.intent= rules.smarthome; </tag>  \n        </item> \n\n        <item>   \n          <ruleref uri="#search"/>\n          <tag> out= new Object();out.intent= rules.search; </tag>       \n        </item>\n\n        <item>   \n          <ruleref uri="#appointmentPlus"/>\n          <tag> out= new Object();out.intent= rules.appointmentPlus; </tag>  \n        </item>\n\n        <item>   \n          <ruleref uri="#appointmentPro"/>\n          <tag> out= new Object();out.intent= rules.appointmentPro; </tag>     \n        </item>\n\n        <item>\n            <ruleref uri="#changecolour"/>\n            <tag> out= new Object();out.intent= rules.changecolour; </tag>      \n        </item>\n    </one-of>\n\n    \x3c!--Polite expressions after--\x3e\n    <item repeat="0-"><ruleref uri="#Politeness"/></item>\n\n\n\n  </rule> \n\n\n  //Polite Expressions//\n  <rule id="Politeness">\n       <one-of>  \n           <item> please </item> <item> thanks </item> <item> thank you </item> \n           <item> could you </item> <item> would you </item> <item> can you </item> \n           <item> will you </item> <item> i would like to </item>  <item> i want to </item> \n       </one-of>\n  </rule>\n\n\n  //01 Smart Home//\n  <rule id="smarthome">\n       <one-of>  \n           <item> smart home </item> <item> control my home </item> <item> control my stuff </item> \n           <item> control my house </item> <item> use smart home </item> \n       </one-of>\n   <tag> out="smarthome" </tag>\n  </rule>\n\n  //02 Search on DuckDuckGo//\n  <rule id="search">\n       <one-of>  \n           <item> search </item> <item> do a search </item> <item> search for something </item> \n           <item> search on the web </item> <item> search on the internet </item> \n       </one-of>\n    <tag> out="search" </tag>\n  </rule>\n\n  //03 Appointment Plus//\n  <rule id="appointmentPlus">\n       <one-of>  \n           <item> appointment plus </item> <item> make an appointment step by step </item> \n           <item> appointments plus </item> <item> appointment-plus </item>\n       </one-of>\n   <tag> out="appointmentPlus" </tag>\n  </rule>\n\n  //04 Appointment Pro//\n  <rule id="appointmentPro">\n       <one-of>  \n           <item> make an appointment </item> <item> meet someone </item> <item> appointment pro </item> \n           <item> appointment in one go </item> <item> appointment in one step </item> \n           <item> appointments pro </item> <item> appointment-pro </item>\n       </one-of>\n     <tag> out="appointmentPro" </tag>\n  </rule>\n\n  //05 Colour Changer//\n  <rule id="changecolour">\n       <one-of>  \n           <item> color changer </item> <item> change the color </item> <item> change color </item> \n           <item> colour changer </item> <item> change the colour </item> <item> change colour </item> \n       </one-of>\n     <tag> out="changecolour" </tag>\n\n  </rule>\n\n\n\n   \n</grammar>\n');let W=function(e){let t=Object(d.a)(e.toLowerCase().split(/\s+/),B).resultsForRule(B.$root)[0];return t?t.intent:t};console.log(W("smart home")),console.log(W("lalalala"));Object(s.q)((e=>({type:"SPEAK",value:W(e.recResult)})));function U(e){return console.log(">>Saying: ".concat(e)),Object(s.q)((t=>({type:"SPEAK",value:e})))}const F={initial:"init",states:{init:{on:{CLICK:"welcomePrompt"}},welcomePrompt:Object(i.a)({on:{RECOGNISED:[{target:"stop",cond:e=>"stop"===e.recResult},{target:"NotACommand",cond:e=>!W(e.recResult)},{target:"smarthome",cond:e=>"smarthome"===W(e.recResult)},{target:"search",cond:e=>"search"===W(e.recResult)},{target:"appointmentPlus",cond:e=>"appointmentPlus"===W(e.recResult)},{target:"appointmentPro",cond:e=>"appointmentPro"===W(e.recResult)},{target:"changecolour",cond:e=>"changecolour"===W(e.recResult)}],CLICK:"stop"}},function(e){return{initial:"prompt",states:{prompt:{entry:U(e),on:{ENDSPEECH:"ask"}},ask:{entry:Object(s.q)("LISTEN")}}}}("Hi, what can I do for you?")),stop:{entry:U("Ok, stopped"),always:"init"},NotACommand:{entry:U("Sorry, I dont know how to do that. I can control smart home, search, make an appointment, or change the colour."),on:{ENDSPEECH:"welcomePrompt"}},smarthome:Object(i.a)(Object(i.a)({},E),{},{onDone:"init"}),search:Object(i.a)(Object(i.a)({},O),{},{onDone:"init"}),appointmentPlus:Object(i.a)(Object(i.a)({},C),{},{onDone:"init"}),appointmentPro:Object(i.a)(Object(i.a)({},q),{},{onDone:"init"}),changecolour:Object(i.a)(Object(i.a)({},z),{},{onDone:"init"})}};var $=n(24),X=n(15);Object(c.a)({url:"https://statecharts.io/inspect",iframe:!1});const J=Object(a.a)({id:"root",type:"parallel",states:{dm:Object(i.a)({},F),asrtts:{initial:"idle",states:{idle:{on:{LISTEN:"recognising",SPEAK:{target:"speaking",actions:Object(s.b)(((e,t)=>({ttsAgenda:t.value})))}}},recognising:{initial:"progress",entry:"recStart",exit:"recStop",on:{ASRRESULT:{actions:["recLogResult",Object(s.b)(((e,t)=>({recResult:t.value})))],target:".match"},RECOGNISED:"idle"},states:{progress:{},match:{entry:Object(s.q)("RECOGNISED")}}},speaking:{entry:"ttsStart",on:{ENDSPEECH:"idle"}}}}}},{actions:{recLogResult:e=>{console.log("<< ASR: "+e.recResult)},test:()=>{console.log("test")},logIntent:e=>{console.log("<< NLU intent: "+e.nluData.intent.name)}}}),Y=e=>{switch(!0){case e.state.matches({asrtts:"recognising"}):return Object(X.jsx)("button",Object(i.a)(Object(i.a)({type:"button",className:"glow-on-hover",style:{animation:"glowing 20s linear"}},e),{},{children:"Listening..."}));case e.state.matches({asrtts:"speaking"}):return Object(X.jsx)("button",Object(i.a)(Object(i.a)({type:"button",className:"glow-on-hover",style:{animation:"bordering 1s infinite"}},e),{},{children:"Speaking..."}));default:return Object(X.jsx)("button",Object(i.a)(Object(i.a)({type:"button",className:"glow-on-hover"},e),{},{children:"Click to start"}))}};function V(){const e=Object($.useSpeechSynthesis)({onEnd:()=>{l("ENDSPEECH")}}),t=e.speak,n=e.cancel,i=(e.speaking,Object($.useSpeechRecognition)({onResult:e=>{l({type:"ASRRESULT",value:e})}})),r=i.listen,a=(i.listening,i.stop),s=Object(m.b)(J,{devTools:!0,actions:{recStart:Object(m.a)((()=>{console.log("Ready to receive a voice input."),r({interimResults:!1,continuous:!0})})),recStop:Object(m.a)((()=>{console.log("Recognition stopped."),a()})),ttsStart:Object(m.a)(((e,n)=>{console.log("Speaking..."),t({text:e.ttsAgenda})})),ttsCancel:Object(m.a)(((e,t)=>{console.log("TTS STOP..."),n()})),speak:Object(m.a)((e=>{console.log("Speaking..."),t({text:e.ttsAgenda})}))}}),c=Object(o.a)(s,3),u=c[0],l=c[1];c[2];return Object(X.jsx)("div",{className:"App",children:Object(X.jsx)(Y,{state:u,onClick:()=>l("CLICK")})})}const Q=document.getElementById("root");r.render(Object(X.jsx)(V,{}),Q)}},[[42,1,2]]]);
//# sourceMappingURL=main.2f4171f7.chunk.js.map